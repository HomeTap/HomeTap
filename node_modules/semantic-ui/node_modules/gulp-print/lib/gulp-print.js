// Generated by CoffeeScript 1.10.0
var green, log, magenta, map, path, print, ref,
  slice = [].slice;

map = require('map-stream');

ref = require('colors'), green = ref.green, magenta = ref.magenta;

path = require('path');

log = function() {
  var args, color, sig;
  color = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
  sig = color ? "[" + (green('gulp')) + "]" : "[gulp]";
  args.unshift(sig);
  return console.log.apply(console, args);
};

print = function(options) {
  var colors, format;
  if (options == null) {
    options = {};
  }
  if (typeof options === 'function') {
    options = {
      format: options
    };
  }
  format = options.format, colors = options.colors;
  if (colors == null) {
    colors = true;
  }
  if (format == null) {
    format = function(filepath) {
      return filepath;
    };
  }
  return map(function(file, cb) {
    var filepath, formatted;
    filepath = path.relative(process.cwd(), file.path);
    if (colors !== false) {
      filepath = magenta(filepath);
    }
    formatted = format(filepath);
    if (formatted) {
      print.log(colors, formatted);
    }
    return cb(null, file);
  });
};

print.log = log;

module.exports = print;
